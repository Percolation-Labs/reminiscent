# ClusterSecretStore for AWS Parameter Store
#
# Allows ExternalSecrets to fetch secrets from AWS SSM Parameter Store.
# Authentication is handled via EKS Pod Identity - no explicit credentials needed.
#
# Prerequisites:
#   1. External Secrets Operator installed in external-secrets-system namespace
#   2. CDK Pod Identity association created for external-secrets service account
#
# Usage in ExternalSecret:
#   spec:
#     secretStoreRef:
#       name: aws-parameter-store
#       kind: ClusterSecretStore
#     data:
#     - secretKey: api-key
#       remoteRef:
#         key: /rem/llm/anthropic-api-key
#
# Note: Region should match your deployment. Update if deploying to different region.

apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: aws-parameter-store
spec:
  provider:
    aws:
      service: ParameterStore
      # UPDATE THIS: AWS region where SSM parameters are stored
      # Should match cluster-config.yaml aws.region
      region: us-east-1
      # No auth block needed - Pod Identity handles authentication automatically
